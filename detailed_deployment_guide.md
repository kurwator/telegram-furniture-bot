# Подробная инструкция по развертыванию Telegram-бота для каталога мебели на Amvera

## Содержание
1. [Подготовка к развертыванию](#1-подготовка-к-развертыванию)
2. [Установка Git](#2-установка-git)
3. [Создание репозитория на GitHub](#3-создание-репозитория-на-github)
4. [Загрузка файлов бота в GitHub](#4-загрузка-файлов-бота-в-github)
5. [Регистрация на платформе Amvera](#5-регистрация-на-платформе-amvera)
6. [Подключение GitHub-репозитория к Amvera](#6-подключение-github-репозитория-к-amvera)
7. [Настройка переменных окружения](#7-настройка-переменных-окружения)
8. [Сборка и развертывание бота](#8-сборка-и-развертывание-бота)
9. [Проверка работоспособности бота](#9-проверка-работоспособности-бота)
10. [Устранение возможных проблем](#10-устранение-возможных-проблем)
11. [Использование редактора каталога](#11-использование-редактора-каталога)

## 1. Подготовка к развертыванию

### 1.1. Что вам понадобится
- Компьютер с доступом в интернет
- Токен Telegram-бота (полученный от @BotFather)
- Аккаунт на GitHub
- Аккаунт на платформе Amvera
- Архив с файлами бота (предоставлен в комплекте)

### 1.2. Распаковка архива с ботом
1. **Откройте** проводник файлов на вашем компьютере
2. **Найдите** скачанный архив `new_telegram_catalog_bot.zip`
3. **Щелкните правой кнопкой мыши** по архиву и выберите "Извлечь все..." или используйте программу для работы с архивами (WinRAR, 7-Zip и т.д.)
4. **Выберите папку** для распаковки файлов (например, `C:\Projects\furniture_bot` или другое удобное место)
5. **Нажмите кнопку** "Извлечь"
6. **Дождитесь** окончания распаковки

## 2. Установка Git

### 2.1. Скачивание Git
1. **Откройте браузер** и перейдите на сайт [https://git-scm.com/downloads](https://git-scm.com/downloads)
2. **Выберите** версию для вашей операционной системы (Windows, macOS или Linux)
3. **Нажмите** на ссылку для скачивания

### 2.2. Установка Git на Windows
1. **Запустите** скачанный файл установщика
2. **Нажмите** "Next" на экране приветствия
3. **Примите** лицензионное соглашение и нажмите "Next"
4. **Выберите** папку для установки (можно оставить по умолчанию) и нажмите "Next"
5. **Выберите** компоненты для установки (можно оставить по умолчанию) и нажмите "Next"
6. **Выберите** имя для папки в меню "Пуск" (можно оставить по умолчанию) и нажмите "Next"
7. **Выберите** редактор по умолчанию (рекомендуется Notepad++ или Visual Studio Code) и нажмите "Next"
8. **Выберите** опцию "Git from the command line and also from 3rd-party software" и нажмите "Next"
9. **Выберите** "Use the OpenSSL library" и нажмите "Next"
10. **Выберите** "Checkout Windows-style, commit Unix-style line endings" и нажмите "Next"
11. **Выберите** "Use MinTTY" и нажмите "Next"
12. **Оставьте** остальные настройки по умолчанию, нажимая "Next"
13. **Нажмите** "Install" для начала установки
14. **Дождитесь** завершения установки и нажмите "Finish"

### 2.3. Установка Git на macOS
1. **Запустите** скачанный файл установщика
2. **Следуйте** инструкциям установщика, нажимая "Continue"
3. **Примите** лицензионное соглашение
4. **Выберите** диск для установки и нажмите "Install"
5. **Введите** пароль администратора, если потребуется
6. **Дождитесь** завершения установки и нажмите "Close"

### 2.4. Настройка Git
1. **Откройте** командную строку (Windows) или терминал (macOS/Linux)
2. **Введите** следующую команду для настройки имени пользователя:
   ```
   git config --global user.name "Ваше имя"
   ```
3. **Нажмите Enter**
4. **Введите** следующую команду для настройки email:
   ```
   git config --global user.email "ваш.email@example.com"
   ```
5. **Нажмите Enter**

## 3. Создание репозитория на GitHub

### 3.1. Вход в аккаунт GitHub
1. **Откройте браузер** и перейдите на сайт [https://github.com](https://github.com)
2. **Нажмите** кнопку "Sign in" в правом верхнем углу
3. **Введите** ваш логин и пароль
4. **Нажмите** кнопку "Sign in"

### 3.2. Создание нового репозитория
1. **Нажмите** на значок "+" в правом верхнем углу
2. **Выберите** "New repository" из выпадающего меню
3. **Введите** имя репозитория (например, "furniture-catalog-bot")
4. **Добавьте** описание (необязательно)
5. **Выберите** тип репозитория: "Public" или "Private"
   - Public: репозиторий будет доступен всем
   - Private: репозиторий будет доступен только вам и приглашенным пользователям
6. **Не ставьте** галочку "Initialize this repository with a README"
7. **Нажмите** кнопку "Create repository"

### 3.3. Копирование URL репозитория
1. **Нажмите** кнопку "Code" (зеленая кнопка)
2. **Убедитесь**, что выбрана вкладка "HTTPS"
3. **Скопируйте** URL репозитория (он будет выглядеть примерно так: `https://github.com/ваш-username/furniture-catalog-bot.git`)

## 4. Загрузка файлов бота в GitHub

### 4.1. Клонирование пустого репозитория
1. **Откройте** командную строку (Windows) или терминал (macOS/Linux)
2. **Перейдите** в папку, где вы хотите хранить файлы проекта:
   ```
   cd C:\Projects
   ```
   или для macOS/Linux:
   ```
   cd ~/Projects
   ```
3. **Введите** команду для клонирования репозитория:
   ```
   git clone https://github.com/ваш-username/furniture-catalog-bot.git
   ```
4. **Нажмите Enter** и дождитесь завершения клонирования
5. **Перейдите** в папку клонированного репозитория:
   ```
   cd furniture-catalog-bot
   ```

### 4.2. Копирование файлов бота в репозиторий
1. **Откройте** проводник файлов
2. **Перейдите** в папку, где вы распаковали архив с ботом
3. **Выделите** все файлы и папки (Ctrl+A)
4. **Скопируйте** их (Ctrl+C)
5. **Перейдите** в папку клонированного репозитория (например, `C:\Projects\furniture-catalog-bot`)
6. **Вставьте** файлы (Ctrl+V)

### 4.3. Добавление файлов в Git и отправка в GitHub
1. **Вернитесь** в командную строку или терминал
2. **Убедитесь**, что вы находитесь в папке репозитория:
   ```
   cd C:\Projects\furniture-catalog-bot
   ```
   или для macOS/Linux:
   ```
   cd ~/Projects/furniture-catalog-bot
   ```
3. **Введите** команду для добавления всех файлов:
   ```
   git add .
   ```
4. **Нажмите Enter**
5. **Введите** команду для создания коммита:
   ```
   git commit -m "Initial commit: Telegram furniture catalog bot"
   ```
6. **Нажмите Enter**
7. **Введите** команду для отправки файлов в GitHub:
   ```
   git push origin main
   ```
   или если ветка называется "master":
   ```
   git push origin master
   ```
8. **Введите** ваш логин и пароль GitHub, если потребуется
9. **Дождитесь** завершения отправки файлов

### 4.4. Проверка загрузки файлов
1. **Откройте браузер** и перейдите на страницу вашего репозитория на GitHub
2. **Убедитесь**, что все файлы успешно загружены

## 5. Регистрация на платформе Amvera

### 5.1. Создание аккаунта на Amvera
1. **Откройте браузер** и перейдите на сайт [https://amvera.ru](https://amvera.ru)
2. **Нажмите** кнопку "Регистрация" или "Sign Up"
3. **Заполните** форму регистрации:
   - Email
   - Пароль
   - Подтверждение пароля
4. **Примите** условия использования
5. **Нажмите** кнопку "Зарегистрироваться"
6. **Проверьте** вашу электронную почту и подтвердите регистрацию, перейдя по ссылке в письме

### 5.2. Вход в аккаунт Amvera
1. **Перейдите** на сайт [https://amvera.ru](https://amvera.ru)
2. **Нажмите** кнопку "Вход" или "Sign In"
3. **Введите** ваш email и пароль
4. **Нажмите** кнопку "Войти"

## 6. Подключение GitHub-репозитория к Amvera

### 6.1. Создание нового приложения
1. **Войдите** в панель управления Amvera
2. **Нажмите** кнопку "Создать приложение" или "New Application"
3. **Введите** название приложения (например, "furniture-catalog-bot")
4. **Выберите** тип приложения "Python"

### 6.2. Подключение репозитория GitHub
1. **В разделе** "Источник кода" выберите "GitHub"
2. **Нажмите** кнопку "Подключить GitHub"
3. **Авторизуйте** Amvera в GitHub, если это требуется:
   - Нажмите "Authorize Amvera"
   - Введите пароль GitHub, если потребуется
4. **Выберите** ваш репозиторий из списка (например, "furniture-catalog-bot")
5. **Выберите** ветку "main" или "master"
6. **Нажмите** кнопку "Продолжить" или "Next"

## 7. Настройка переменных окружения

### 7.1. Добавление переменных окружения
1. **В настройках** приложения на Amvera перейдите в раздел "Переменные окружения" или "Environment Variables"
2. **Добавьте** следующие переменные:
   - **BOT_TOKEN**: Введите токен вашего Telegram-бота, полученный от @BotFather
   - **DATABASE_URL**: Оставьте значение по умолчанию "sqlite:///data/catalog.db"
   - **SECRET_KEY**: Введите любую случайную строку для безопасности (например, "your_secret_key_12345")
   - **AUTH_CODE**: Введите код авторизации для бота (например, "12345")
   - **ADMIN_USERNAME**: Введите имя пользователя администратора (например, "admin")
   - **ADMIN_PASSWORD**: Введите пароль администратора (например, "admin_password")
3. **Нажмите** кнопку "Сохранить" или "Save"

## 8. Сборка и развертывание бота

### 8.1. Запуск сборки
1. **В настройках** приложения на Amvera перейдите в раздел "Сборка и развертывание" или "Build and Deploy"
2. **Нажмите** кнопку "Собрать и развернуть" или "Build and Deploy"
3. **Дождитесь** завершения процесса сборки и развертывания
   - Этот процесс может занять несколько минут
   - Вы можете следить за прогрессом в логах сборки

### 8.2. Проверка статуса развертывания
1. **После завершения** сборки и развертывания, перейдите в раздел "Обзор" или "Overview"
2. **Убедитесь**, что статус приложения "Запущено" или "Running"
3. **Запишите** URL вашего приложения (он будет выглядеть примерно так: `https://furniture-catalog-bot.amvera.io`)

## 9. Проверка работоспособности бота

### 9.1. Открытие бота в Telegram
1. **Откройте** приложение Telegram на вашем устройстве
2. **Найдите** вашего бота по имени (которое вы указали при создании бота в @BotFather)
3. **Откройте** чат с ботом

### 9.2. Тестирование основных функций
1. **Отправьте** команду `/start` боту
2. **Введите** код авторизации (который вы указали в переменных окружения)
3. **Проверьте** работу основных функций:
   - Просмотр каталога: нажмите кнопку "Каталог"
   - Поиск товаров: нажмите кнопку "Поиск"
   - Подписка: нажмите кнопку "Подписка"
   - Профиль: нажмите кнопку "Профиль"

## 10. Устранение возможных проблем

### 10.1. Бот не отвечает
1. **Проверьте** статус приложения в панели управления Amvera
2. **Просмотрите** логи приложения:
   - Перейдите в раздел "Логи" или "Logs"
   - Проверьте наличие ошибок
3. **Убедитесь**, что токен бота указан правильно в переменных окружения
4. **Перезапустите** приложение:
   - Нажмите кнопку "Перезапустить" или "Restart" в панели управления Amvera

### 10.2. Ошибки при сборке
1. **Просмотрите** логи сборки в панели управления Amvera
2. **Убедитесь**, что файл `requirements.txt` содержит все необходимые зависимости
3. **Проверьте** файл `amvera.yml` на корректность
4. **Исправьте** обнаруженные ошибки в коде
5. **Загрузите** исправленные файлы в GitHub:
   ```
   git add .
   git commit -m "Fix errors"
   git push origin main
   ```
6. **Запустите** сборку и развертывание заново

### 10.3. Проблемы с базой данных
1. **Убедитесь**, что директория `data` существует и доступна для записи
2. **Проверьте** переменную окружения `DATABASE_URL`
3. **Просмотрите** логи приложения на наличие ошибок, связанных с базой данных

## 11. Использование редактора каталога

### 11.1. Установка редактора каталога
1. **Распакуйте** архив с редактором каталога на ваш компьютер
2. **Убедитесь**, что у вас установлен Python 3.8 или выше:
   - Откройте командную строку или терминал
   - Введите команду `python --version` или `python3 --version`
   - Если Python не установлен, скачайте его с [python.org](https://python.org)
3. **Установите** необходимые зависимости:
   ```
   pip install -r requirements.txt
   ```

### 11.2. Запуск редактора каталога
1. **Откройте** командную строку или терминал
2. **Перейдите** в папку с редактором каталога:
   ```
   cd путь/к/папке/с/редактором
   ```
3. **Запустите** редактор:
   ```
   python furniture_catalog_manager.py
   ```
   или
   ```
   python3 furniture_catalog_manager.py
   ```

### 11.3. Работа с редактором каталога
1. **В главном меню** выберите нужное действие, введя соответствующую цифру:
   - 1: Просмотр каталога
   - 2: Добавление нового товара
   - 3: Редактирование товара
   - 4: Удаление товара
   - 5: Управление категориями
   - 6: Поиск товаров
   - 7: Статистика
   - 0: Выход
2. **Следуйте** инструкциям на экране для выполнения выбранного действия
3. **После завершения** работы с редактором, выберите опцию "0: Выход"

### 11.4. Синхронизация данных с ботом
1. **Экспортируйте** базу данных из редактора:
   - В главном меню выберите "8: Экспорт/Импорт данных"
   - Выберите "1: Экспортировать базу данных"
   - Укажите путь для сохранения файла базы данных
2. **Загрузите** файл базы данных на сервер Amvera:
   - Войдите в панель управления Amvera
   - Перейдите в раздел "Файлы" или "Files"
   - Найдите папку "data"
   - Загрузите экспортированный файл базы данных, заменив существующий
3. **Перезапустите** приложение в панели управления Amvera

## Заключение

Поздравляем! Вы успешно развернули Telegram-бот для каталога мебели на платформе Amvera и настроили редактор каталога для управления товарами. Теперь вы можете добавлять, редактировать и удалять товары в каталоге, а пользователи могут просматривать их через Telegram-бот.

Если у вас возникнут вопросы или проблемы, обратитесь к разделу "Устранение возможных проблем" данной инструкции или свяжитесь с технической поддержкой Amvera.
